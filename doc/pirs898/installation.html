<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>EGSnrc C++ class library: Installation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">EGSnrc C++ class library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Installation </h1>  </div>
</div>
<div class="contents">
<div class="textblock"><p>The EGSnrc C++ class library is distributed with the rest of the EGSnrc system. Although in principle <code>egspp</code> can be used standalone (<em>i.e</em>. without the rest of the EGSnrc system), it is distributed and set up under the assumptiom that it is part of a complete EGSnrc distribution and that the main EGSnrc installation has been completed (<em>i.e</em>. the environment variables <code>HEN_HOUSE</code>, <code>EGS_HOME</code> and <code>EGS_CONFIG</code> are set, the search path includes the EGSnrc directories used to store executables and there is a config file pointed to by <code>$EGS_CONFIG</code>, see PIRS-877 for more details).</p>
<p>Before the main C++ class library <code>egspp</code>, the various geometry, source and shape DSOs, or any user code written in C++ can be compiled, a configuration for the C++ compiler used must be created. This is very similar to the configuration of the main system which results in the creation of a config file stored in <code>$HEN_HOUSE/specs</code> and pointed to by <code>$EGS_CONFIG</code>, which specifies the names of the Fortran and C compiler, compilation options, etc. Unlike the main config file, the C++ compiler configuration file is not created automatically during installation. This is due to the fact that we have access to only a very limited set of systems that have a Fortran and a C++ compiler installed and therefore could not test the system installation and configuration on a wide range of systems that resulted in the automatic configuration process for the main config file. Example C++ configuration files are included in the <code>specs</code> subdirectory of the distribution for</p>
<ul>
<li>A 32 bit Linux system with the GNU Fortran and C++ compiler (<code>egspp_gcc_example.conf</code>)</li>
<li>A 64 bit Linux system with the GNU Fortran and C++ compiler (<code>egspp_gcc64_example.conf</code>). The only difference to the 32 bit configuration is that the <code>-fPIC</code> compilation option is required when building shared libraries.</li>
<li>A Linux system with the Intel Fortran and C++ compiler (<code>egspp_intel1_example.conf</code>).</li>
<li>A Linux system with the PGI Fortran and C++ compiler (<code>egspp_pgf77_example.conf</code>). Note that if you use an older version of the PGI compiler and a newer Linux system, the header files may be incompatible. In this case, you will need to add <code>-DMISSING</code> to the compilation options for the C++ compiler</li>
<li>A Solaris-x86 system with the GNU Fortran and C++ compiler (<code>egspp_solaris-g++_example.conf</code>)</li>
<li>A Mac OSX system with the GNU Fortran and C++ compiler (<code>egspp_osx_example.conf</code>)</li>
<li>A Windows NT, 2000 or XP system with the GNU Fortran and C++ compiler (<code>egspp_win2k_example.conf</code>). Note that in order to use this configuration, you will have to adjust the name of the directory and the GNU compiler version to the directory of your GNU compiler installation and its version number.</li>
<li>A Windows NT, 2000 or XP system with the GNU Fortran and the Microsoft Visual C++ compiler (<code>egspp_win2k-cl_example.conf</code>). Note, however, that this configuration only works if the <code>egspp</code> libraries and the C++ EGSnrc application are compiled with double precision floating point arithmetic (there are random crashes when using single precision, which appear to be due to incompatible math libraries). To use double precision, you can either change the variable <code>DEF1</code> in your <code>egspp</code> config file to be <div class="fragment"><pre class="fragment">
  DEF1 = -DWIN32 -DMSVC -DFDOUBLE
  </pre></div> and define a variable <div class="fragment"><pre class="fragment">
  FDEFS = -DFDOUBLE
  </pre></div> in your main EGSnrc config file. Alternatively, you can set this variables on the command line when building the libraries and C++ applications using <div class="fragment"><pre class="fragment">
  make FDEFS="-DFDOUBLE" DEF1="-DWIN32 -DMSVC -DFDOUBLE"
  </pre></div></li>
</ul>
<p>If your system is one of these, you can simply copy the corresponding file to <code>egspp_$my_machine.conf</code>, where <code>$my_machine</code> is the name of the main configuration. Otherwise, a configuration has to be created by starting from one of the examples and adjusting the various options according to your compiler/system documentation. One of the variables that must be defined is the libraries needed when linking together Fortran and C++ code (<code>fortran_libs</code>). On a Linux/Unix system you can obtain these libraries using the script <code>$HEN_HOUSE/scripts/get_f77_libs1</code> by running it with the names of the Fortran and C++ compiler as arguments, <em>e.g</em>. </p>
<div class="fragment"><pre class="fragment">
$HEN_HOUSE/scripts/get_f77_libs1 g77 g++
</pre></div><p> and then copying the output to the <code>fortran_libs</code> variable in your configuration file.</p>
<p>Once there is a C++ configuration file and the rest of the EGSnrc system is properly installed, simply go to the <code>$HEN_HOUSE/egs++</code> directory and type </p>
<div class="fragment"><pre class="fragment">
make
</pre></div><p> This will build the main <code>egspp</code> library and the various geometry and source DSOs distributed with the system.</p>
<p>To compile the geometry viewer, a recent Qt library installation is required (version 3.2 or newer). If you have the Qt library installed, go to the <code>$HEN_HOUSE/egs++/view</code> directory and execute <code>make</code>. Note that the Qt library and the <code>egspp</code> libraries must be compiled with the same C++ compiler. This is due to potentially different function name mangling schemes used by different compilers. This fact implies that Windows users must use the Microsoft Visual C++ compiler because the Qt library that we distribute with the system is compiled with it (unless, of course, the user licenses the Qt library for Windows from Trolltech and builds it with the compiler of their choice). We distribute the <code>egspp</code> libraries and the geometry viewer compiled with the Microsoft Visual compiler with the system in the <code>V4_winstuff.egszip</code> file. The libraries and viewer are installed in <code>$HEN_HOUSE/egs++/dso/win2k-cl</code> and this path is added to the search path automatically by the installer. The consequence of this is that Windows users can not pick <code>win2k-cl</code> as the name of their main EGSnrc configuration. </p>
</div></div>
<hr class="footer"/><address class="footer"><small>Generated by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
