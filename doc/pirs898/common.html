<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>EGSnrc C++ class library: Common input blocks for the EGSnrc C++ user codes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">EGSnrc C++ class library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Common input blocks for the EGSnrc C++ user codes </h1>  </div>
</div>
<div class="contents">
<div class="textblock"><ul>
<li>
<a class="el" href="common.html#common_intro">Introduction</a>  </li>
<li>
<a class="el" href="common.html#common_geom_source_rco">Geometry, particle source and run control</a>  </li>
<li>
<a class="el" href="common.html#common_mc">Monte Carlo transport parameter control</a>  </li>
</ul>
<h2><a class="anchor" id="common_intro"></a>
Introduction</h2>
<p>All C++ user codes distributed with EGSnrc use the same syntax for inputing information regarding geometry, source, run control and MC transport parameters. Only the input blocks for scoring and variance reduction techniques vary in these codes.</p>
<h2><a class="anchor" id="common_geom_source_rco"></a>
Geometry, particle source and run control</h2>
<p>Geometry and particle source are specified in an input file as explained in the <a class="el" href="group__Geometry.html">geometry module </a> and the <a class="el" href="group__Sources.html">particle sources module</a>. Run control is specified in a section of the input file delimited by </p>
<div class="fragment"><pre class="fragment">
:start run control:
:stop run control:
</pre></div><p>A <a class="el" href="classEGS__RunControl.html">simple </a> run control object (RCO) is used to control a single run. A simple RCO understands the following inputs </p>
<div class="fragment"><pre class="fragment">
ncase                       = number of histories to run
nbatch                      = number of batches to use (default is 10)
statistical accuracy sought = required uncertainty in %
max cpu hours allowed       = max. CPU time allowed
calculation                 = first or restart or combine or analyze
</pre></div><p> The only required input is the number of histories. The <b>nbatch</b> input determines how many times the simulation will report its progress (and not, as one might expect, the number of statistical batches as a history-by-history statistical analysis is used). With the <b><code> statistical accuracy sought </code></b> input one can make the calculation terminate when the specified uncertainty is reached for the cavity dose. Note, however, that after <b><code>ncase</b></code> histories the simulation does not continue <em>until</em> this uncertainty is obtained. With the <b><code>max cpu hours allowed</code></b> input one can limit the simulation time to some maximum time in hours. With the <b><code>calculation</b></code> input one determines the type of simulation:</p>
<ul>
<li><b> <code>first</b></code> means a fresh simulation (the default)</li>
<li>with <b> <code>restart</b></code> one can restart a previously performed simulation</li>
<li>with <b><code>combine</b></code> one can combine the results of parallel runs. This is needed when one or more of the parallel jobs has not finished so that the results are not automatically combined or when one uses a simple RCO for parallel runs (see below).</li>
<li>the <b><code>analyze</b></code> option is used to read the simulation data from the <b><code></code>.egsdat</b> file and output the results to the standard output.</li>
</ul>
<p>A <a class="el" href="classEGS__JCFControl.html">"job-control-file" (JCF) </a> RCO is used by default for parallel runs. A JCF RCO understands in addition to the above the optional input </p>
<div class="fragment"><pre class="fragment">
nchunk = number of simulation chunks (default is 10)
</pre></div><p> In parallel runs the simulation is split into <b><code> nchunk*n_parallel</code></b> portions and each parallel job simulates one portion at a time until no histories are left. Note that a functioning file locking functionality is needed on the system in order to use a JCF-RCO. As some users have reported problems with file locking, one can force the use of a simple RCO by specifying <b><code>-s</code></b> on the command line. In this case, all parallel jobs will execute the same number of histories as specified in the input file.</p>
<h2><a class="anchor" id="common_mc"></a>
Monte Carlo transport parameter control</h2>
<p>Monte Carlo transport parameters are common to all EGSnrc user codes. The input block to enter/modify transport parameters is shown below:</p>
<div class="fragment"><pre class="fragment">
#  Modify here parameters that should be different from their defaults.
:start MC transport parameter:
 Global ECUT =                 0.521  #Global electron transport cutoff
 Global PCUT =                 0.001  #Global photon transport cutoff
 Global SMAX =                  1e10  #Global maximum step-size restriction for e- transport
 ESTEPE =                       0.25  # Default is 0.25
 XIMAX =                         0.5  # Default is 0.5, max. value is 1.
 Boundary crossing algorithm = exact  #exact (default), PRESTA-I
 Skin depth for BCA =              3  # Default value is 3 for exact boundary crossing
 Electron-step algorithm = PRESTA-II  #PRESTA-II (default),PRESTA-I
 Spin effects =                   On  #On (default),Off
 Brems angular sampling =         KM  #Simple,KM (default)
 Brems cross sections =           BH  #BH (default),NIST
 Pair angular sampling =      Simple  #Off, Simple (default),KM
 Triplet production =            Off  #On or Off (default)
 Electron Impact Ionization =    Off  #On, Off (default), casnati, kolbenstvedt, gryzinski
 Bound Compton scattering =    norej  #On, Off, norej (default)
 Radiative Compton corrections = Off  #On,  Off (default)
 Rayleigh scattering =            Off #On ,Off (default), custom
 Photoelectron angular sampling = On  #On (default),Off
 Atomic relaxations =             On  #On (default),Off
 Photon cross sections =        xcom  #si, epdl, xcom (default) or user-supplied
 Photon cross-sections output =  Off  #Off (default) or On
 Compton cross sections = comp_xsections # user-supplied
:stop MC transport parameter:
</pre></div><p>Default values used in EGSnrc are set to provide an accurate simulation of the electron-photon transport, except for the exclusion of coherent (Rayleigh) scattering in low-energy photon problems. The reason for this is that until very recently users needed to especifically request the inclusion of Rayleigh cross sections in the PEGS4 data sets. Currently, Rayleigh cross sections are generated on the fly (see Rayleigh in PIRS-701). Default values may often only add time to your calculation. One can speed things up by turning them off. The user is referred to section 2.6 of the PIRS-702 user-code manual for a detailed description of these parameters. </p>
</div></div>
<hr class="footer"/><address class="footer"><small>Generated by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
