<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>EGSnrc C++ class library: EGS_CollimatedSource Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">EGSnrc C++ class library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<h1>EGS_CollimatedSource Class Reference<div class="ingroups"><a class="el" href="group__Sources.html">Particle sources</a></div></h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="EGS_CollimatedSource" --><!-- doxytag: inherits="EGS_BaseSimpleSource" -->
<p>A collimated particle source.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="egs__collimated__source_8h_source.html">egs_collimated_source.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for EGS_CollimatedSource:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classEGS__CollimatedSource.png" usemap="#EGS_CollimatedSource_map" alt=""/>
  <map id="EGS_CollimatedSource_map" name="EGS_CollimatedSource_map">
<area href="classEGS__BaseSimpleSource.html" alt="EGS_BaseSimpleSource" shape="rect" coords="0,112,150,136"/>
<area href="classEGS__BaseSource.html" alt="EGS_BaseSource" shape="rect" coords="0,56,150,80"/>
<area href="classEGS__Object.html" alt="EGS_Object" shape="rect" coords="0,0,150,24"/>
</map>
 </div></div>

<p><a href="classEGS__CollimatedSource-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEGS__CollimatedSource.html#abcdfe2beafe3368bfc99368e56e62823">EGS_CollimatedSource</a> (int Q, <a class="el" href="classEGS__BaseSpectrum.html">EGS_BaseSpectrum</a> *Spec, <a class="el" href="classEGS__BaseShape.html">EGS_BaseShape</a> *sshape, <a class="el" href="classEGS__BaseShape.html">EGS_BaseShape</a> *tshape, const string &amp;Name=&quot;&quot;, <a class="el" href="classEGS__ObjectFactory.html">EGS_ObjectFactory</a> *f=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEGS__CollimatedSource.html#ad96421f1a2815f1d88c85546e69e293f">EGS_CollimatedSource</a> (<a class="el" href="classEGS__Input.html">EGS_Input</a> *, <a class="el" href="classEGS__ObjectFactory.html">EGS_ObjectFactory</a> *f=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ace0a506508a3e647ca33d25f05f79107"></a><!-- doxytag: member="EGS_CollimatedSource::getPositionDirection" ref="ace0a506508a3e647ca33d25f05f79107" args="(EGS_RandomGenerator *rndm, EGS_Vector &amp;x, EGS_Vector &amp;u, EGS_Float &amp;wt)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>getPositionDirection</b> (<a class="el" href="classEGS__RandomGenerator.html">EGS_RandomGenerator</a> *rndm, <a class="el" href="classEGS__Vector.html">EGS_Vector</a> &amp;x, <a class="el" href="classEGS__Vector.html">EGS_Vector</a> &amp;u, EGS_Float &amp;wt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaf1f8b030f143381c3821913e554885e"></a><!-- doxytag: member="EGS_CollimatedSource::getFluence" ref="aaf1f8b030f143381c3821913e554885e" args="() const " -->
EGS_Float&#160;</td><td class="memItemRight" valign="bottom"><b>getFluence</b> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8c6b3e227d7030b8673a68a04279d912"></a><!-- doxytag: member="EGS_CollimatedSource::storeFluenceState" ref="a8c6b3e227d7030b8673a68a04279d912" args="(ostream &amp;data) const " -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>storeFluenceState</b> (ostream &amp;data) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a096337156668e597754ec260d8f4a2b2"></a><!-- doxytag: member="EGS_CollimatedSource::setFluenceState" ref="a096337156668e597754ec260d8f4a2b2" args="(istream &amp;data)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>setFluenceState</b> (istream &amp;data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="accfe459bd56c1cfbe399078e5202183c"></a><!-- doxytag: member="EGS_CollimatedSource::addFluenceData" ref="accfe459bd56c1cfbe399078e5202183c" args="(istream &amp;data)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>addFluenceData</b> (istream &amp;data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a748b46df99ef930ab23b14f7120e2aa7"></a><!-- doxytag: member="EGS_CollimatedSource::isValid" ref="a748b46df99ef930ab23b14f7120e2aa7" args="() const " -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>isValid</b> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4c23809ad18ea34986251647d463aa61"></a><!-- doxytag: member="EGS_CollimatedSource::resetFluenceCounter" ref="a4c23809ad18ea34986251647d463aa61" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>resetFluenceCounter</b> ()</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9c09b9222ae72c666f8922527b09bbbe"></a><!-- doxytag: member="EGS_CollimatedSource::setUp" ref="a9c09b9222ae72c666f8922527b09bbbe" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>setUp</b> ()</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acb237b60b057d9c2a2b4efc8bac36e1e"></a><!-- doxytag: member="EGS_CollimatedSource::source_shape" ref="acb237b60b057d9c2a2b4efc8bac36e1e" args="" -->
<a class="el" href="classEGS__BaseShape.html">EGS_BaseShape</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEGS__CollimatedSource.html#acb237b60b057d9c2a2b4efc8bac36e1e">source_shape</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">the source shape <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad37aff29907ca7d0983c655f20d7bff0"></a><!-- doxytag: member="EGS_CollimatedSource::target_shape" ref="ad37aff29907ca7d0983c655f20d7bff0" args="" -->
<a class="el" href="classEGS__BaseShape.html">EGS_BaseShape</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEGS__CollimatedSource.html#ad37aff29907ca7d0983c655f20d7bff0">target_shape</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">the target shape <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a002bc1e227968407a6d7808463a27908"></a><!-- doxytag: member="EGS_CollimatedSource::ctry" ref="a002bc1e227968407a6d7808463a27908" args="" -->
EGS_I64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEGS__CollimatedSource.html#a002bc1e227968407a6d7808463a27908">ctry</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of attempts to sample a particle <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab8a433f2203ba4435f48b8147599475d"></a><!-- doxytag: member="EGS_CollimatedSource::dist" ref="ab8a433f2203ba4435f48b8147599475d" args="" -->
EGS_Float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEGS__CollimatedSource.html#ab8a433f2203ba4435f48b8147599475d">dist</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">source-target shape min. distance <br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>A collimated particle source. </p>
<p>A collimated source is an isotropic source collimated in such a way as to irradiate only a certain area or solid angle. The particle positions <img class="formulaInl" alt="$\vec{x}$" src="form_1.png"/> for this source are picked from any <a class="el" href="classEGS__BaseShape.html">shape </a> (the source shape). The particle directions are determined by picking a position <img class="formulaInl" alt="$\vec{x}'$" src="form_93.png"/> from another shape (the target shape) and setting the direction to be <img class="formulaInl" alt="$\vec{u}=(\vec{x}'-\vec{x})/|\vec{x}'-\vec{x}|$" src="form_230.png"/>. In order to get a proper isotropic source collimated to the area of the target shape, the statistical weight of the particles must be adjusted accordingly (basically set to the scalar product of the surface normal and <img class="formulaInl" alt="$\vec{x}'-\vec{x}$" src="form_231.png"/> divided by the distance between <img class="formulaInl" alt="$\vec{x}'$" src="form_93.png"/> and <img class="formulaInl" alt="$\vec{x}$" src="form_1.png"/> to the third power and multiplied by the surface area from which points <img class="formulaInl" alt="$\vec{x}'$" src="form_93.png"/> are being picked). This is done in a special method of the target shape called <a class="el" href="classEGS__BaseShape.html#a36d3970fbe24be3b2701124a76fcef09">getPointSourceDirection() </a>. Not all shapes support this method. The shapes that support this method and can therefore be used as a target shape in a collimated source are <a class="el" href="classEGS__BoxShape.html">boxes, </a> <a class="el" href="classEGS__SphereShape.html">spheres, </a> <a class="el" href="classEGS__CylinderShape.html">cylinders, </a> <a class="el" href="classEGS__CircleShape.html">circles, </a> <a class="el" href="classEGS__EllipseShape.html">ellipses, </a> <a class="el" href="classEGS__RectangleShape.html">rectangles </a> or <a class="el" href="classEGS__RectangularRing.html">"rectangular rings", </a> <a class="el" href="classEGS__PolygonShape.html">polygons </a> and <a class="el" href="classEGS__TriangleShape.html">triangles </a>.</p>
<p>A collimated source is defined as follows: </p>
<div class="fragment"><pre class="fragment">
:start source:
    library = egs_collimated_source
    name = some_name
    :start source shape:
        definition of the source shape
    :stop source shape:
    :start target shape:
        definition of the target shape
    :stop target shape:
    :start spectrum:
        definition of the spectrum
    :stop spectrum:
    charge = -1 or 0 or 1 for electrons or photons or positrons
:stop source:
</pre></div><p> It is worth noting that the functionality of sources 1, 11, 12, 14, 15 and 16 from the RZ series of user codes and source 3 in DOSXYZnrc can be reproduced with the collimated source from the EGSnrc C++ class library. </p>

<p>Definition at line <a class="el" href="egs__collimated__source_8h_source.html#l00122">122</a> of file <a class="el" href="egs__collimated__source_8h_source.html">egs_collimated_source.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="abcdfe2beafe3368bfc99368e56e62823"></a><!-- doxytag: member="EGS_CollimatedSource::EGS_CollimatedSource" ref="abcdfe2beafe3368bfc99368e56e62823" args="(int Q, EGS_BaseSpectrum *Spec, EGS_BaseShape *sshape, EGS_BaseShape *tshape, const string &amp;Name=&quot;&quot;, EGS_ObjectFactory *f=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EGS_CollimatedSource::EGS_CollimatedSource </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>Q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classEGS__BaseSpectrum.html">EGS_BaseSpectrum</a> *&#160;</td>
          <td class="paramname"><em>Spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classEGS__BaseShape.html">EGS_BaseShape</a> *&#160;</td>
          <td class="paramname"><em>sshape</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classEGS__BaseShape.html">EGS_BaseShape</a> *&#160;</td>
          <td class="paramname"><em>tshape</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>Name</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classEGS__ObjectFactory.html">EGS_ObjectFactory</a> *&#160;</td>
          <td class="paramname"><em>f</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Constructor</p>
<p>Construct a collimated source with charge <em>Q</em>, spectrum <em>Spec</em>, source shape <em>sshape</em> and target shape <em>tshape</em>. </p>

<p>Definition at line <a class="el" href="egs__collimated__source_8h_source.html#l00132">132</a> of file <a class="el" href="egs__collimated__source_8h_source.html">egs_collimated_source.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad96421f1a2815f1d88c85546e69e293f"></a><!-- doxytag: member="EGS_CollimatedSource::EGS_CollimatedSource" ref="ad96421f1a2815f1d88c85546e69e293f" args="(EGS_Input *, EGS_ObjectFactory *f=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EGS_CollimatedSource::EGS_CollimatedSource </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classEGS__Input.html">EGS_Input</a> *&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classEGS__ObjectFactory.html">EGS_ObjectFactory</a> *&#160;</td>
          <td class="paramname"><em>f</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Constructor</p>
<p>Construct a collimated source from the information pointed to by <em>inp</em>. </p>

<p>Definition at line <a class="el" href="egs__collimated__source_8cpp_source.html#l00040">40</a> of file <a class="el" href="egs__collimated__source_8cpp_source.html">egs_collimated_source.cpp</a>.</p>

<p>References <a class="el" href="egs__shapes_8cpp_source.html#l00051">EGS_BaseShape::createShape()</a>, <a class="el" href="egs__collimated__source_8h_source.html#l00198">dist</a>, <a class="el" href="egs__functions_8cpp_source.html#l00116">egsWarning</a>, <a class="el" href="egs__input_8cpp_source.html#l00261">EGS_Input::getInput()</a>, <a class="el" href="egs__object__factory_8h_source.html#l00104">EGS_Object::getObjectName()</a>, <a class="el" href="egs__object__factory_8h_source.html#l00110">EGS_Object::getObjectType()</a>, <a class="el" href="egs__shapes_8cpp_source.html#l00063">EGS_BaseShape::getShape()</a>, <a class="el" href="egs__collimated__source_8h_source.html#l00191">source_shape</a>, <a class="el" href="egs__shapes_8h_source.html#l00190">EGS_BaseShape::supportsDirectionMethod()</a>, <a class="el" href="egs__input_8cpp_source.html#l00193">EGS_Input::takeInputItem()</a>, and <a class="el" href="egs__collimated__source_8h_source.html#l00191">target_shape</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/ftessier/EGSnrc/github/EGSnrc-doc/HEN_HOUSE/egs++/sources/egs_collimated_source/<a class="el" href="egs__collimated__source_8h_source.html">egs_collimated_source.h</a></li>
<li>/home/ftessier/EGSnrc/github/EGSnrc-doc/HEN_HOUSE/egs++/sources/egs_collimated_source/<a class="el" href="egs__collimated__source_8cpp_source.html">egs_collimated_source.cpp</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
